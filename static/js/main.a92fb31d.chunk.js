(this.webpackJsonptag=this.webpackJsonptag||[]).push([[0],{22:function(e,t,a){e.exports=a(43)},27:function(e,t,a){},28:function(e,t,a){},36:function(e,t,a){},37:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){},40:function(e,t,a){},43:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(7),s=a.n(c),o=(a(27),a(2)),l=(a(28),a(1)),u=a.n(l),i=a(19),m=a(3),d=a(9),f=a.n(d);a(30),a(32),a(44);f.a.initializeApp({apiKey:"AIzaSyBmFYmRZAFz03khfVpdQ_dX9yXZKvvN-jI",authDomain:"tagg-9192a.firebaseapp.com",databaseURL:"https://tagg-9192a.firebaseio.com",projectId:"tagg-9192a",storageBucket:"tagg-9192a.appspot.com",messagingSenderId:"433099258283",appId:"1:433099258283:web:91581830dfb543a1d9faee",measurementId:"G-PLD4MQN1H6"});var p=f.a.auth(),h=f.a.firestore(),b=f.a.storage(),E=function(){var e=Object(m.a)(u.a.mark((function e(t,a){var n,r,c,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return n=h.doc("users/".concat(t.uid)),e.next=5,n.get();case 5:if(e.sent.exists){e.next=17;break}return r=t.displayName,c=t.email,s=new Date,e.prev=9,e.next=12,n.set(Object(i.a)({displayName:r,email:c,createdAt:s},a));case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(9),console.log("error at creating user",e.t0.message);case 17:case"end":return e.stop()}}),e,null,[[9,14]])})));return function(t,a){return e.apply(this,arguments)}}(),v=function(){var e=Object(m.a)(u.a.mark((function e(t,a){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",alert("Unauthenticated User"));case 2:return n=h.doc("users/".concat(t.uid)),e.next=5,n.get();case 5:if(!e.sent.exists){e.next=17;break}return e.prev=7,e.next=10,n.set({Question:a},{merge:!0});case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(7),alert("Cannot store the submission");case 15:e.next=18;break;case 17:alert("user not stored in database");case 18:case"end":return e.stop()}}),e,null,[[7,12]])})));return function(t,a){return e.apply(this,arguments)}}(),g=function(){var e=Object(m.a)(u.a.mark((function e(t,a,n){var r,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",alert("Unauthenticated User"));case 2:return r=b.ref(),c=r.child("".concat(t.email)),e.prev=4,e.next=7,c.put(a).then((function(e){}));case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(4),alert("Error in uplaoding file",e.t0);case 12:c.getDownloadURL().then((function(e){n(e)}));case 13:case"end":return e.stop()}}),e,null,[[4,9]])})));return function(t,a,n){return e.apply(this,arguments)}}(),w=new f.a.auth.GoogleAuthProvider;w.setCustomParameters({prompt:"select_account"});var N=function(){return p.signInWithPopup(w)};f.a;var y=function(e){var t=e.setPage,a=e.user;return r.a.createElement("div",{className:"HomePageContainer"},r.a.createElement("div",{className:"header"},r.a.createElement("p",{onClick:function(){a?p.signOut():N()}},a?"Sign Out":"Sign In")),r.a.createElement("div",{className:"TitleContainer"},r.a.createElement("p",null,"THE AARUSHI GUPTA GAME")),r.a.createElement("div",{className:"ButtonContainer"},r.a.createElement("button",{className:"rounded-button",onClick:function(){a?t("submit"):N()}},"Submit An Entry"),r.a.createElement("button",{className:"rounded-button",onClick:function(){a?t("game"):N()}},"Play!")))},x=a(6);a(36);var j=function(e){var t=e.user,a=e.setPage,c=Object(n.useState)(null),s=Object(o.a)(c,2),l=s[0],u=s[1],i=Object(n.useState)("#"),m=Object(o.a)(i,2),d=m[0],f=m[1],p=Object(x.b)(),h=p.handleSubmit,b=p.control;return r.a.createElement("div",{className:"Page"},r.a.createElement("div",{className:"wrapper"},r.a.createElement("div",{className:"imageWrapper"},r.a.createElement("img",{src:d,alt:"Memory",height:"200px",width:"240px"})),r.a.createElement("div",{className:"formWrapper"},r.a.createElement("form",{onSubmit:h((function(e){l?(v(t,e),a("home")):alert("Please Select an Image")}),(function(e){alert(e.message)}))},r.a.createElement(x.a,{as:r.a.createElement("input",{className:"inputField"}),name:"user_name",type:"text",defaultValue:t.displayName,autoComplete:"off",control:b,rules:{required:!0}}),r.a.createElement(x.a,{as:r.a.createElement("input",{className:"inputField"}),name:"hint",type:"text",defaultValue:"",autoComplete:"off",placeholder:"Enter some hint",control:b,rules:{required:!0}}),r.a.createElement(x.a,{as:r.a.createElement("textarea",{className:"memoryField"}),name:"memory",autoComplete:"off",placeholder:"Enter memory related to the photo you have uploaded",control:b,rules:{required:!0}}),r.a.createElement("input",{type:"file",id:"file",name:"file",className:"file",onChange:function(e){var a;u((a=e).target.files[0]),g(t,a.target.files[0],f)},required:!0,accept:"image/*"}),r.a.createElement("center",null,r.a.createElement("label",{htmlFor:"file"},"Choose a photo")),r.a.createElement("center",null,r.a.createElement("button",{type:"submit",className:"submitButton"}," Submit "))))))};a(37);var k=function(e){var t=e.data,a=e.setPage,n=e.setQuestionData;return r.a.createElement("div",{className:"card",onClick:function(){return n(t),void a("question")}},r.a.createElement("p",{className:"card-content"},t[0].hint))};a(38);var O=function(e){var t=e.setPage,a=e.questions,n=e.setQuestionData,c=function(){console.log(a);var e=a.map((function(e,a){return r.a.createElement(k,{key:a,data:e,setPage:t,setQuestionData:n})}));return r.a.createElement("div",null,r.a.createElement("h2",null,"The hints start here:"),e)};return r.a.createElement("div",{className:"PlayPage"},r.a.createElement("div",{className:"Instructions"},r.a.createElement("h1",null,"Instructions:"),r.a.createElement("p",null,"These are some hints in the purple boxes that are related to one person. Click on the box to answer the question and see who actually wrote it..."),r.a.createElement("button",{onClick:function(){t("home")},className:"rounded-button"}," Home ")),r.a.createElement("div",{className:"Questions"},r.a.createElement(c,null)))},S=(a(39),a(21));a(40);var P=function(e){var t=e.setPage,a=e.questionData,c=e.wholeData,s=Object(x.b)(),l=s.control,u=s.handleSubmit,i=Object(n.useState)(null),m=Object(o.a)(i,2),d=m[0],f=m[1],p=Object(n.useState)(null),h=Object(o.a)(p,2),E=h[0],v=h[1],g=Object(n.useState)(!1),w=Object(o.a)(g,2),N=w[0],y=w[1],j=function(){return r.a.createElement("div",{className:"AnswerContainer"},r.a.createElement("div",{className:"Result"},r.a.createElement("h2",null,N?"Correct":"Wrong!!")),r.a.createElement("div",{className:"QuestionDetails"},r.a.createElement("p",null,"Submitted by:  ".concat(a[0].user_name," (").concat(a[1],")"))),r.a.createElement("div",{className:"AnswerImage"},r.a.createElement("img",{src:E,alt:"Memory",height:"240px",width:"240px"})),r.a.createElement("div",{className:"AnswerMemory"},r.a.createElement("h2",null,"Memory:"),a[0].memory))};return r.a.createElement("div",{className:"QuestionPage"},r.a.createElement("div",{className:"questionPart"},r.a.createElement("h2",null,"So who do you think wrote this:"),r.a.createElement("p",null,a[0].hint),r.a.createElement("form",{onSubmit:u((function(e){console.log(e.answer),b.ref().child("".concat(a[1])).getDownloadURL().then((function(e){v(e)}));var t=e.answer.value===a[1];console.log(t),y(t),f(e.answer.value)}))},r.a.createElement(x.a,{as:r.a.createElement(S.a,{options:function(){if(c)return console.log(c),c.map((function(e){return{value:e[1],label:e[0].user_name}}))}(),isMulti:!1,className:"select"}),type:"select",name:"answer",rules:{required:!0},control:l}),r.a.createElement("button",{type:"submit",className:"rounded-button",disabled:d},"Submit"))),r.a.createElement("div",{className:"answerPart"},d?r.a.createElement(j,null):r.a.createElement("div",null),r.a.createElement("button",{className:"rounded-button",onClick:function(){t("game")}},"back")))};var C=function(){var e=Object(n.useState)(null),t=Object(o.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)("home"),l=Object(o.a)(s,2),u=l[0],i=l[1],m=Object(n.useState)(null),d=Object(o.a)(m,2),f=d[0],b=d[1],v=Object(n.useState)(null),g=Object(o.a)(v,2),w=g[0],N=g[1];return Object(n.useEffect)((function(){var e=function(){var e=[];return h.collection("users").get().then((function(t){t.forEach((function(t){t.data().Question&&e.push([t.data().Question,t.data().email])}))})),e}();N(e)}),[]),Object(n.useEffect)((function(){var e=null;return e=p.onAuthStateChanged((function(e){c(e),E(e)})),function(){e()}})),r.a.createElement("div",null,function(){switch(u){case"home":return r.a.createElement(y,{setPage:i,user:a});case"submit":return r.a.createElement(j,{setPage:i,user:a});case"game":return r.a.createElement(O,{setPage:i,questions:w,setQuestionData:b});case"question":return r.a.createElement(P,{setPage:i,questionData:f,wholeData:w});default:return r.a.createElement("div",null,"error")}}())};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(C,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[22,1,2]]]);
//# sourceMappingURL=main.a92fb31d.chunk.js.map